# Make sure weâ€™re using the latest Homebrew, and upgrade any already-installed formulae
brew update && brew upgrade

brew install bash
brew install bash-completion
brew install rails-completion

# Everything else
brew install ack
brew install git
brew install lynx
brew install node
brew install rename
brew install tree
brew install imagemagick
brew install wget
brew install ngrep
brew install linklint
brew install duti
brew install mongodb
brew install optipng
brew install hub
brew install the_silver_searcher
brew install iftop
brew install webkit2png

# node
curl http://npmjs.org/install.sh | sh
npm install -g coffee-script
npm install -g bower

# ruby
brew install icu4c
brew install autoconf
RUBY_VERSION=1.9.3-p327-perf
brew install rbenv
brew install ruby-build

. ~/.bash_profile
if [[ `rbenv global` != '1.9.3-p327-perf' ]]; then
	curl https://raw.github.com/gist/1688857/rbenv.sh | sh
	rbenv rehash
	rbenv global $RUBY_VERSION
	. ~/.bash_profile
fi

# rails tools
brew install pow
brew install mysql
brew install sqlite
brew install vagrant
# vagrant box add ubuntu-12.04 http://files.vagrantup.com/precise64.box
brew install siege
brew install sproxy
brew install sqlite

# http://xquartz.macosforge.org/landing/
# imagemagick + rmagic issues: https://gist.github.com/3177887

gem install notes
gem install powder
gem install heroku
gem install cocoapods
gem install bundle
gem install papertrail

# useful for mysql2sqlite conversion
gem install sequel

# irb / rails console additions
gem install awesome_print
gem install brice
gem install added_methods

brew cleanup

# setup default extension handlers

duti < ~/.duti

# symlink preference files

function preference_link {
	rm ~/Library/Preferences/*$1*
	ln -s $HOME/Dropbox/ApplicationSupport/Preferences/$1 ~/Library/Preferences/$1
}

# sublime
rm /usr/local/bin/subl
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" /usr/local/bin
rm -R "$HOME/Library/Application Support/Sublime Text 3/Packages/"*
ln -s $HOME/Dropbox/ApplicationSupport/SublimeText3/* "$HOME/Library/Application Support/Sublime Text 3/Packages"

# forklift
preference_link "com.binarynights.ForkLift2.plist"

# istatmenus
preference_link "com.bjango.istatmenus.plist"

# divvy
preference_link "com.mizage.divvy.plist"

# sequel pro
preference_link "com.google.code.sequel-pro.plist"

# soulver
preference_link "com.acqualia.soulver.plist"

# sequel pro
mkdir -p "$HOME/Library/Application Support/Sequel Pro/"
rm -Rf "$HOME/Library/Application Support/Sequel Pro/"*
ln -s $HOME/Dropbox/ApplicationSupport/SequelPro/* "$HOME/Library/Application Support/Sequel Pro/"

# on the job
ln -s "$HOME/Dropbox/ApplicationSupport/On The Job 3/" "$HOME/Library/Application Support/On The Job 3"